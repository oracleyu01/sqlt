ğŸ¯ íŠœë‹ì˜ˆì œ14. í…Œì´ë¸” ëœë¤ ì•¡ì„¸ìŠ¤ë¥¼ ì¤„ì´ê¸° ìœ„í•œ ê²°í•© ì»¬ëŸ¼ ì¸ë±ìŠ¤ í™œìš©

ğŸ“ ì´ë¡  ì„¤ëª…

ê²°í•© ì»¬ëŸ¼ ì¸ë±ìŠ¤(Concatenated Index)ëŠ” ì—¬ëŸ¬ ì»¬ëŸ¼ì„ í•˜ë‚˜ì˜ ì¸ë±ìŠ¤ë¡œ êµ¬ì„±í•˜ëŠ” ê°•ë ¥í•œ íŠœë‹ ë°©ë²•ì…ë‹ˆë‹¤. 
ë‹¨ì¼ ì»¬ëŸ¼ ì¸ë±ìŠ¤ë“¤ì„ ê°œë³„ì ìœ¼ë¡œ ì‚¬ìš©í•  ë•Œ ë°œìƒí•˜ëŠ” í…Œì´ë¸” ëœë¤ ì•¡ì„¸ìŠ¤ë¥¼ íšê¸°ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
ë‹¨ì¼ ì»¬ëŸ¼ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í–ˆì„ ë•ŒëŠ” 2ê°œì˜ ì¸ë±ìŠ¤ë¥¼ ì™”ë‹¤ê°”ë‹¤ í•˜ë©´ì„œ ê¸¸ê²Œ ìŠ¤ìº”í•˜ì§€ë§Œ, 
ê²°í•© ì»¬ëŸ¼ ì¸ë±ìŠ¤ë¡œ êµ¬ì„±í•˜ë©´ ì•„ì£¼ ì§§ê²Œ ìŠ¤ìº”í•˜ë©´ì„œ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

âš¡ê²°í•© ì»¬ëŸ¼ ì¸ë±ìŠ¤ì˜ ì£¼ìš” ì¥ì ì€:

ãƒ» ì—¬ëŸ¬ ì»¬ëŸ¼ì„ ë™ì‹œì— ê²€ìƒ‰í•  ë•Œ ì¸ë±ìŠ¤ ìŠ¤ìº” ë²”ìœ„ê°€ ìµœì†Œí™”ë©ë‹ˆë‹¤
ãƒ» í…Œì´ë¸” ì•¡ì„¸ìŠ¤ íšŸìˆ˜ê°€ í¬ê²Œ ê°ì†Œí•©ë‹ˆë‹¤
ãƒ» ì¸ë±ìŠ¤ ìì²´ì— ì •ë ¬ëœ ë°ì´í„°ë¥¼ í¬í•¨í•˜ë¯€ë¡œ ì¶”ê°€ ì •ë ¬ ì‘ì—…ì´ ë¶ˆí•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
ãƒ» íŠ¹íˆ ëŒ€ìš©ëŸ‰ í…Œì´ë¸”ì—ì„œ ë§¤ìš° íš¨ê³¼ì ì¸ ì„±ëŠ¥ í–¥ìƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤

ğŸ’» ì‹¤ìŠµ1: emp í…Œì´ë¸”ì— deptnoì™€ jobì— ê²°í•© ì»¬ëŸ¼ ì¸ë±ìŠ¤ë¥¼ ê±°ì‹œì˜¤!

@demo
create index emp_deptno_job on emp(deptno, job);

ğŸ’» ì‹¤ìŠµ2: emp_deptno_job ê²°í•© ì¸ë±ìŠ¤ì˜ êµ¬ì¡°ë¥¼ í™•ì¸í•˜ì‹œì˜¤!

select deptno, job, ROWID
from emp
where deptno >= 0;

ğŸ’» ì‹¤ìŠµ3: ë¶€ì„œë²ˆí˜¸ê°€ 20ë²ˆì´ê³  ì§ì—…ì´ ANALYSTì¸ ì‚¬ì›ë“¤ì˜ ì´ë¦„ê³¼ ì›”ê¸‰ê³¼ ì§ì—…ê³¼ ë¶€ì„œë²ˆí˜¸ë¥¼ ì¶œë ¥í•˜ì‹œì˜¤! 

ì‹¤í–‰ê³„íšë„ í™•ì¸í•´ì„œ ë²„í¼ì˜ ê°¯ìˆ˜ë„ í™•ì¸í•˜ì„¸ìš”!

select ename, sal, job, deptno
from emp
where deptno = 20 and job = 'ANALYST';
select * from table(dbms_xplan.display_cursor(null, null, 'ALLSTATS LAST'));

ğŸ’» ì‹¤ìŠµ4: ì•„ë˜ì™€ ê°™ì´ ëŒ€ìš©ëŸ‰ í…Œì´ë¸”ë“¤ì„ ìƒì„±í•˜ì‹œì˜¤!

drop table mcustsum purge;

create table mcustsum
as
select rownum custno
, '2008' || lpad(ceil(rownum/100000), 2, '0') salemm
, decode(mod(rownum, 12), 1, 'A', 'B') salegb
, round(dbms_random.value(1000,100000), -2) saleamt
from dual
connect by level <= 1200000;

create index m_salegb on mcustsum(salegb);
create index m_salemm on mcustsum(salemm);
create index m_salegb_salemm on mcustsum(salegb,salemm);

ğŸ’» ì‹¤ìŠµ5: ì•„ë˜ì˜ SQLì˜ ì‹¤í–‰ê³„íšì„ í™•ì¸í•´ì„œ ì˜µí‹°ë§ˆì´ì ¸ê°€ ì–´ë–¤ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í–ˆëŠ”ì§€ í™•ì¸í•˜ì‹œì˜¤!

select /*+ index(t M_SALEGB_SALEMM) / count()
from mcustsum t
where salegb = 'A'
and salemm between '200801' and '200812';

ğŸ¤” ë¬¸ì œ1. ì•„ë˜ì˜ SQLì´ salegb ì»¬ëŸ¼ì˜ ì¸ë±ìŠ¤ë¥¼ ì•¡ì„¸ìŠ¤í•˜ë„ë¡ íŒíŠ¸ë¥¼ ì£¼ê³  ì‹¤í–‰í•˜ì‹œì˜¤!

select  count()
from mcustsum t
where salegb = 'A'
and salemm between '200801' and '200812';

ğŸ¤” ë¬¸ì œ2. ì•„ë˜ì˜ SQLì´ salemm ì»¬ëŸ¼ì˜ ì¸ë±ìŠ¤ë¥¼ ì•¡ì„¸ìŠ¤í•˜ë„ë¡ íŒíŠ¸ë¥¼ ì£¼ê³  ì‹¤í–‰í•˜ì‹œì˜¤!

select  count()
from mcustsum t
where salegb = 'A'
and salemm between '200801' and '200812';

âš ï¸ ì£¼ì˜ì‚¬í•­

ãƒ» ê²°í•© ì»¬ëŸ¼ ì¸ë±ìŠ¤ëŠ” ì»¬ëŸ¼ ìˆœì„œê°€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤
ãƒ» WHERE ì ˆì˜ ì¡°ê±´ ìˆœì„œì™€ ì¸ë±ìŠ¤ ì»¬ëŸ¼ ìˆœì„œë¥¼ ì¼ì¹˜ì‹œí‚¤ë©´ ë” íš¨ê³¼ì ì…ë‹ˆë‹¤
ãƒ» ê³¼ë„í•œ ê²°í•© ì»¬ëŸ¼ ì¸ë±ìŠ¤ëŠ” DML ì„±ëŠ¥ì„ ì €í•˜ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤
ãƒ» ì‹¤í–‰ê³„íšì„ í†µí•´ ë²„í¼ ì‚¬ìš©ëŸ‰ì„ ë°˜ë“œì‹œ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤

ğŸ“ ê²°ë¡ 

ãƒ» ê²°í•© ì»¬ëŸ¼ ì¸ë±ìŠ¤ëŠ” í…Œì´ë¸” ëœë¤ ì•¡ì„¸ìŠ¤ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤
ãƒ» ë‹¨ì¼ ì»¬ëŸ¼ ì¸ë±ìŠ¤ë³´ë‹¤ ë” ë‚˜ì€ ì„±ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
ãƒ» íŠ¹íˆ ëŒ€ìš©ëŸ‰ í…Œì´ë¸”ì—ì„œ í˜„ì €í•œ ì„±ëŠ¥ í–¥ìƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤
ãƒ» ê²°í•© ì»¬ëŸ¼ ì¸ë±ìŠ¤ëŠ” ë²„í¼(buffer)ì˜ ê°¯ìˆ˜ë¥¼ 281ê°œë§Œ ì½ì–´ ê°€ì¥ íš¨ìœ¨ì ì¸ ì„±ëŠ¥ì„ ë³´ì˜€ìŠµë‹ˆë‹¤

