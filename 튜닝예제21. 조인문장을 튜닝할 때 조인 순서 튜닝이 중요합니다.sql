π― νλ‹μμ 21. μ΅°μΈ μμ„ νλ‹μ μ¤‘μ”μ„±κ³Ό μ μ© λ°©λ²•

π“ μ΄λ΅  μ„¤λ…

SQL μ΅°μΈ νλ‹μ€ μ΅°μΈ μμ„μ™€ λ°©λ²•μ„ μµμ ν™”ν•μ—¬ μ„±λ¥μ„ κ°μ„ ν•λ” λ° μ¤‘μ μ„ λ‘΅λ‹λ‹¤. 
μ΅°μΈ μμ„λ¥Ό μ μ ν μ„¤μ •ν•λ©΄ λ¶ν•„μ”ν• λ°μ΄ν„° μ ‘κ·Όμ„ μ¤„μ΄κ³  μ²λ¦¬ μ†λ„λ¥Ό ν¬κ² 
ν–¥μƒμ‹ν‚¬ μ μμµλ‹λ‹¤. λν•, μ΅°μΈ λ°©λ²•μ„ λ°μ΄ν„°μ μ–‘κ³Ό νΉμ„±μ— λ§κ² μ„ νƒν•λ” κ²ƒλ„ 
μ¤‘μ”ν•©λ‹λ‹¤.

π“ μ΅°μΈ νλ‹μ—μ„ μ•μ•„μ•Ό ν•  λ‘ κ°€μ§€ μ”μ†


β΅μ΅°μΈ λ°©λ²• (3κ°€μ§€)

γƒ» Nested Loop Join: μ΅°μΈν•λ” λ°μ΄ν„° μ–‘μ΄ μ μ„ λ• μ ν•©ν• μ΅°μΈ λ°©λ²•.
γƒ» Hash Join: μ΅°μΈν•λ” λ°μ΄ν„° μ–‘μ΄ λ§μ„ λ• μ ν•©ν•λ©° ν•΄μ‹ ν…μ΄λΈ”μ„ μ΄μ©ν•μ—¬ μ²λ¦¬.
γƒ» Sort Merge Join: μ΅°μΈν•λ” λ°μ΄ν„° μ–‘μ΄ λ§κ³  μ •λ ¬λ κ²°κ³Όκ°€ ν•„μ”ν•  λ• μ ν•©.

β΅μ΅°μΈ μμ„

γƒ» ORDERED ννΈ: FROM μ μ ν…μ΄λΈ” μμ„λ€λ΅ μ΅°μΈ.
γƒ» LEADING ννΈ: ννΈ μ•μ— λ…μ‹ν• ν…μ΄λΈ” μμ„λ€λ΅ μ΅°μΈ.

π’» μ‹¤μµ1: EMPμ™€ DEPT ν…μ΄λΈ” μ΅°μΈν•μ—¬ μ΄λ¦„κ³Ό λ¶€μ„ μ„μΉ μ¶λ ¥ν•μ‹μ¤

@demo

select e.ename, d.loc
from emp e, dept d
where e.deptno = d.deptno;

π“ κ΄€λ ¨ μ„¤λ…

EMP β†’ DEPT μμΌλ΅ μ΅°μΈ: 14λ² μ΅°μΈ μ‹λ„
DEPT β†’ EMP μμΌλ΅ μ΅°μΈ: 4λ² μ΅°μΈ μ‹λ„

π’» μ‹¤μµ2: LEADING ννΈλ¥Ό μ‚¬μ©ν•μ—¬ μ΅°μΈ μμ„ λ³€κ²½ λ° λ²„νΌ μ‚¬μ©λ‰ λΉ„κµ

@demo

EMP β†’ DEPT μμΌλ΅ μ΅°μΈ (λ²„νΌ: 105κ°)

select /*+ leading(e d) use_nl(d) */ e.ename, d.loc
from emp e, dept d
where e.deptno = d.deptno;
-------------------------------------------------------------------------------------
| Id  | Operation          | Name | Starts | E-Rows | A-Rows |   A-Time   | Buffers |
-------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |      |      1 |        |     14 |00:00:00.01 |     105 |
|   1 |  NESTED LOOPS      |      |      1 |     14 |     14 |00:00:00.01 |     105 |
|   2 |   TABLE ACCESS FULL| EMP  |      1 |     14 |     14 |00:00:00.01 |       7 |
|*  3 |   TABLE ACCESS FULL| DEPT |     14 |      1 |     14 |00:00:00.01 |      98 |
-------------------------------------------------------------------------------------

DEPT β†’ EMP μμΌλ΅ μ΅°μΈ (λ²„νΌ: 35κ°)

select /*+ leading(d e) use_nl(e) */ e.ename, d.loc
from emp e, dept d
where e.deptno = d.deptno;
-------------------------------------------------------------------------------------
| Id  | Operation          | Name | Starts | E-Rows | A-Rows |   A-Time   | Buffers |
-------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |      |      1 |        |     14 |00:00:00.01 |      35 |
|   1 |  NESTED LOOPS      |      |      1 |     14 |     14 |00:00:00.01 |      35 |
|   2 |   TABLE ACCESS FULL| DEPT |      1 |      4 |      4 |00:00:00.01 |       7 |
|*  3 |   TABLE ACCESS FULL| EMP  |      4 |      4 |     14 |00:00:00.01 |      28 |
-------------------------------------------------------------------------------------

π“ κ²°κ³Ό

μ΅°μΈ μμ„λ¥Ό DEPT β†’ EMPλ΅ λ³€κ²½ν•λ©΄ λ²„νΌ μ‚¬μ©λ‰μ΄ 105κ°μ—μ„ 35κ°λ΅ κ°μ†.

π¤” λ¬Έμ : μ•„λ SQLμ μ΅°μΈ μμ„λ¥Ό λ³€κ²½ν•μ—¬ μ„±λ¥μ„ νλ‹ν•μ‹μ¤!

β¨ νλ‹μ „:

select /*+ leading(e s) use_nl(s) */ e.ename, e.sal, s.grade
from emp e, salgrade s
where e.sal between s.losal and s.hisal;

--------------------------------------------------------------------------------------------------
| Id  | Operation          | Name     | Starts | E-Rows | A-Rows |   A-Time   | Buffers | Reads  |
--------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |          |      1 |        |     14 |00:00:00.01 |      91 |      6 |
|   1 |  NESTED LOOPS      |          |      1 |      1 |     14 |00:00:00.01 |      91 |      6 |
|   2 |   TABLE ACCESS FULL| EMP      |      1 |     14 |     14 |00:00:00.01 |       7 |      0 |
|*  3 |   TABLE ACCESS FULL| SALGRADE |     14 |      1 |     14 |00:00:00.01 |      84 |      6 |
--------------------------------------------------------------------------------------------------
β¨ νλ‹ν›„:




-----------------------------------------------------------------------------------------
| Id  | Operation          | Name     | Starts | E-Rows | A-Rows |   A-Time   | Buffers |
-----------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |          |      1 |        |     14 |00:00:00.01 |      41 |
|   1 |  NESTED LOOPS      |          |      1 |      1 |     14 |00:00:00.01 |      41 |
|   2 |   TABLE ACCESS FULL| SALGRADE |      1 |      5 |      5 |00:00:00.01 |       6 |
|*  3 |   TABLE ACCESS FULL| EMP      |      5 |      1 |     14 |00:00:00.01 |      35 |
-----------------------------------------------------------------------------------------

π“ κ²°λ΅ 

γƒ» μ΅°μΈ μμ„λ¥Ό μ μ ν μ΅°μ •ν•λ©΄ λ²„νΌ μ‚¬μ©λ‰μ„ μ¤„μ΄κ³  μ„±λ¥μ„ ν–¥μƒμ‹ν‚¬ μ μμµλ‹λ‹¤.
γƒ» LEADING ννΈλ¥Ό μ‚¬μ©ν•μ—¬ νΉμ • μ΅°μΈ μμ„λ¥Ό μ§€μ •ν•  μ μμµλ‹λ‹¤.
γƒ» λ°μ΄ν„° μ–‘κ³Ό μΏΌλ¦¬ νΉμ„±μ— λ”°λΌ μ ν•©ν• μ΅°μΈ λ°©λ²•(Nested Loop, Hash, Sort Merge)μ„ 
   μ„ νƒν•΄μ•Ό ν•©λ‹λ‹¤.
γƒ» ν¨μ¨μ μΈ μ΅°μΈ νλ‹μ€ λ€κ·λ¨ λ°μ΄ν„° μ²λ¦¬μ—μ„ μ¤‘μ”ν• μ—­ν• μ„ ν•©λ‹λ‹¤.
